**–ö–ª—é—á–µ–≤–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –í—ã–≤–æ–¥ —á–µ—Ä–µ–∑ `print()` –Ω–µ –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω. –î–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `result`. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ `print(my_data)` –ø–∏—à–∏—Ç–µ `result = str(my_data)`.
–í—ã–ø–æ–ª–Ω–∏—Ç—å Python –∫–æ–¥. 
–ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é, –µ—Å–ª–∏ –Ω–µ —É—Å–ø–µ—à–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –µ—ë –≤–µ—Ä–¥–∏–∫—Ç –≤–º–µ—Å—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. 
–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é result, —Ç–æ —á—Ç–æ —Ç—ã –≤—ã–≤–µ–ª —Å –ø–æ–º–æ—â—å—é print –∏–ª–∏ —á–µ—Ä–µ–∑ stdout 
    (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ system) —Ç—ã –Ω–µ —É–≤–∏–¥–µ—à—å, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Å–µ–±–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤–º–µ—Å—Ç–æ print(\"...\") –∏—Å–ø–æ–ª—å–∑—É–π result += \"...\", 
    –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ –ø–µ—Ä–µ–¥–∞–Ω–æ —Ç–µ–±–µ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏., –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π print –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º—ã –≤—ã–≤–æ–¥–∞ –≤ stdout. 
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é exec(code, globals(), local_env) (local_env —ç—Ç–æ locals(), –Ω–æ –≤–Ω—É—Ä—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ Chat), 
    self - —Ç–µ–∫—É—â–∏–π self –∫–ª–∞—Å—Å–∞ Chat, —Ç—ã –º–æ–∂–µ—à—å –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª—é–±–æ–π –µ–≥–æ –º–µ—Ç–æ–¥ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ª—é–±—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
    (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å send –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å:
    def send:
        #...
    self.send = types.MethodType(send, self)
    ) –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ (–≤ local_env, —Ç–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å local_env –Ω–∞–ø—Ä—è–º—É—é).
–¢—ã –Ω–µ –º–æ–∂–µ—à—å –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –∫–æ–¥ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–ª–∞—Å—Å–∞ Chat, –∞ —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∫–ª–∞—Å—Å—ã
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–π –∫–æ–¥, –º–µ–Ω—è–π —Ç–æ–ª—å–∫–æ self (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é send: 
    —Å–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é def send(self, message): ..., –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏ self.send = types.MethodType(send, self))
–¢—ã –º–æ–∂–µ—à—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ Chat, –Ω–æ –Ω–µ –º–æ–∂–µ—à—å –Ω–∏—á–µ–≥–æ –∑–∞ –µ–≥–æ –ø—Ä–µ–¥–µ–ª–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä main).
–ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥ —Å–ª–∏—à–∫–æ–º –≥–ª–æ–±–∞–ª—å–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –≤–µ—Å—å –∫–ª–∞—Å—Å Chat), –ø–æ—Å—Ç–∞—Ä–∞–π—Å—è –ø–æ–º–µ–Ω—è—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å 1 –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤, 
    –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∫–ª–∞—Å—Å—ã, –∫–æ–≥–¥–∞ —Ç—ã —Ö–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–µ—Ç–æ–¥ –¥–ª—è –µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å –µ–≥–æ.
–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–≤–æ–µ–≥–æ –∫–æ–¥–∞ –Ω–µ –Ω–∞–¥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –ª–æ–≥–∏–∫—É Chat, –ø–æ—Å—Ç–∞—Ä–∞–π—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–º—É —Å—Ç–∏–ª—é
    (–Ω–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—Ä–æ—Å–∏–ª —Å–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω—É–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –µ–≥–æ –≤ self.tools_dict, self.tools –∏ —Å–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ "–∏–º—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞"_tool)
    –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–µ—Ç–æ–¥ —Ä–∞–¥–∏ 1 –≤—ã–∑–æ–≤–∞, –ª—É—á—à–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å –µ–≥–æ –∫–æ–¥.
–ü—Ä–æ—â–µ –∏ –∫–æ—Ä–æ—á–µ –æ—Ñ–æ—Ä–º–ª—è–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ result (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –µ—ë –≤ –∫–æ–Ω—Å–æ–ª–∏, –∞ –ø–∏—Å–∞—Ç—å —Å–º–∞–π–ª–∏–∫–∏ –¥–ª—è –ª–æ–≥–æ–≤ –æ—á–µ–Ω—å –≥–ª—É–ø–æ).
–ï—Å–ª–∏ —Ç—ã —Å–æ–∑–¥–∞—à—å —Ñ—É–Ω–∫—Ü–∏—é (–Ω–µ –º–µ—Ç–æ–¥), —Ç–æ –æ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∏ —Ç—ã —Å–º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –ø–æ–∑–∂–µ.
–ù–µ –Ω—É–∂–Ω–æ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–≤–æ–¥—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∂–µ—Ç —á—Ç–æ –±—É–¥–µ—Ç –º–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å,
    –∏–ª–∏ –µ—Å–ª–∏ –º–Ω–æ–≥–æ —Ä–∞–∑ –ø—Ä–æ—Å—è—Ç —Å–¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ–∂–µ, –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –ª—É—á—à–µ –Ω–∞–ø–∏—Å–∞—Ç—å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ).
–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –ø—Ä–∏–≤—è–∂–∏ –µ—ë –∫ self (self.f = f), –∏–Ω–∞—á–µ –∏–∑ –∑–∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, 
    –ø–æ—Å—Ç–∞—Ä–∞–π—Å—è –ø—Ä–∏–¥—É–º–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ, –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ–∫—Ä–∞—Å–∏–≤–æ–µ –∏–º—è, —á—Ç–æ–±—ã —Å–ª—É—á–∞–π–Ω–æ –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–µ—Ç–æ–¥ –∏–ª–∏ –º–µ—Ç–æ–¥ –ø–ª–∞–≥–∏–Ω–∞, –∏–º—è –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å agent_castom_.
–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–¥–∞ result –æ—á–∏—â–∞–µ—Ç—Å—è –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–∞–Ω–Ω–∞ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–µ.

–ü—Ä–∏–º–µ—Ä—ã:
–ó–∞–ø—Ä–æ—Å:
–ü–æ–∫–∞–∂–∏ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ—á–∫—É agent_ext.py
–ö–æ–¥:
with open("agent_ext/agent_ext.py", "r") as f:
    result = f.readline().strip()
–ó–∞–ø—Ä–æ—Å:
–ó–∞–º–µ–Ω–∏ —Å–º–∞–π–ª–∏–∫ ü§ñ –Ω–∞ üß†
–ö–æ–¥:
def _handle_stream_response(self, response_stream):
    # –Ω–∞—á–∞–ª–æ _handle_stream_response (—Ç—ã –¥–æ–ª–∂–µ–Ω –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞–ø–∏—Å–∞—Ç—å)
    print("\\nüß† –ê–≥–µ–Ω—Ç: ", end="", flush=True)
    # –∫–æ–Ω–µ—Ü _handle_stream_response
self._handle_stream_response = types.MethodType(_handle_stream_response, self)


–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –≤–Ω–æ—Å–∏—à—å –≤ self (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥), –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –∏ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª agent_ext.py. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∞–≥–µ–Ω—Ç–∞ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —Å–±—Ä–æ—à–µ–Ω—ã.

**–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏:** –î–ª—è –ª—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (—á—Ç–µ–Ω–∏–µ, –∑–∞–ø–∏—Å—å, –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∞–ø–æ–∫, —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π) –∏—Å–ø–æ–ª—å–∑—É–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ Python, —Ç–∞–∫–∏–µ –∫–∞–∫ `os` –∏ `pathlib`.